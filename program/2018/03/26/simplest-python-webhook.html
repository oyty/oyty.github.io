<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=yes"/>
    <link href="https://oyty.me/main.css" rel="stylesheet" type="text/css">
    <link href="https://oyty.me/codehighlight.css" rel="stylesheet" type="text/css">
    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">
    <link rel="shortcut icon" href="https://oyty.me/images/logo.ico">
    <title>极简python github webhook</title>
</head>
<body>
  <div class="content">
    <h2>极简python github webhook</h2>

<p>```
from flask import Flask
import os
import sys</p>

<p>app = Flask(<strong>name</strong>)</p>

<p>@app.route(&quot;/&quot;, methods=[&quot;GET&quot;, &quot;POST&quot;])
def hello():
    os.system(&#39;git pull&#39;)
    return &quot;hello world&quot;</p>

<p>if <strong>name</strong> == &quot;<strong>main</strong>&quot;:
    app.run(host=&quot;0.0.0.0&quot;, port=int(sys.argv[1]))</p>

<p>```</p>

<p>实现原理，github有新的代码提交的时候会触发配置的post请求，请求到服务器后，会执行git pull命令，over。</p>

<p>让程序后段运行
<code>
nohup python hook.py 11111 &amp;
</code></p>

  </div>


</body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115892756-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115892756-1');
</script>


</html>