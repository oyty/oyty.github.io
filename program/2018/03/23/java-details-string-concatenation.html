<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=yes"/>
    <link href="https://oyty.me/main.css" rel="stylesheet" type="text/css">
    <link href="https://oyty.me/codehighlight.css" rel="stylesheet" type="text/css">
    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">
    <link rel="shortcut icon" href="https://oyty.me/images/logo.ico">
    <title>Java中的字符串拼接</title>
</head>
<body>
  <div class="content">
    <p>﻿</p>

<h2>Java中的字符串拼接</h2>

<p>在Java中，String对象是不可变的（Immutable）。你可以创建多个某一个String对象的别名，但是这些别名的引用是相同的。</p>

<h4>深入剖析字符串拼接</h4>

<p>既然字符串是不可变的，那么当多个字符串拼接时，很自然的就会以为拼接过程中会产生多余的字符串对象。</p>

<pre><code>String a = "aaa";
String b = "bbb";
String c = "ccc";
String info = a + b + c;
</code></pre>

<p>自然会以为上面字符串拼接过程中会产生多余的字符串对象<code>aaabbb</code>，如果拼接的字符串数量足够多的话，那岂不是会产生很多多余的字符串对象，这样不就严重影响性能了吗？</p>

<p>然而事实并非如此。</p>

<h4>编译器的优化处理</h4>

<p>事实上，在Java代码被编译为字节码的时候，jvm会对字符串拼接进行优化处理，会先生成一个StringBuilder，然后后面的拼接就直接调用StringBuilder的append方法。</p>

<p>这样看来，既然编译器做了优化处理，好像我们有没有必要再关注字符串拼接了，然后事实并非如此。
我们来看一种情况</p>

<pre><code>public void implicitUseStringBuilder(String[] values) { 
    String result = ""; 
    for (int i = 0 ; i &lt; values.length; i ++) { 
        result += values[i]; 
    } 
    System.out.println(result); 
}
</code></pre>

<p>在循环里面，字符串有拼接，这个时候jvm也会创建一个StringBuilder，但是循环流程走完后，进入下一个流程的时候又会新创建一个StringBuilder，这样就会创建大量多余的StringBuilder对象，影响性能，所以啊，还是要有好的编码习惯：</p>

<pre><code>public void explicitUseStringBuider(String[] values) { 
    StringBuilder result = new StringBuilder(); 
    for (int i = 0; i &lt; values.length; i ++) { 
        result.append(values[i]); 
    } 
}
</code></pre>

  </div>


</body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115892756-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115892756-1');
</script>


</html>